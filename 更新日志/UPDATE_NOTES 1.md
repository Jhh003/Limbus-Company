# 更新说明 - 边狱公司随机选择器

## 版本 1.0 → 1.1

### 新增功能

1. **人格筛选设置**
   - 新增了详细的人格筛选界面，允许用户为每个罪人单独选择参与随机的人格
   - 支持分页查看不同罪人的人格设置
   - 提供全局和局部的全选/全不选/反选功能
   - 人格选项支持显示头像（需要对应图片资源）

2. **界面布局优化**
   - 重新设计了页面结构，将主选择器和筛选设置分离为两个独立页面
   - 新增导航按钮，支持在两个页面间切换
   - 改进了筛选设置页面的响应式布局

3. **数据结构升级**
   - 人格数据从简单字符串数组升级为对象数组，支持头像字段
   - 新增`filteredPersonalityData`对象存储每个人格的筛选状态

### 修复问题

1. **二级转盘交互问题修复**
   - 解决了"选择多人格罪人并完成二级选择后再选单人格罪人时二级转盘无法转动且无法刷新"的问题
   - 新增`resetPersonaScrollState()`函数，确保每次选择新罪人时二级转盘状态完全重置
   - 优化了从多人格切换到单人格时的筛选状态处理逻辑

2. **其他小问题修复**
   - 改进了单罪人直接选中的逻辑
   - 增强了控制台日志输出，便于调试
   - 优化了滚动容器的过渡效果

### 使用说明

1. 在**主选择器**页面进行随机选择操作
2. 在**筛选设置**页面配置参与随机的罪人和人格
3. 支持为每个罪人单独选择参与随机的人格
4. 确保至少选择一个罪人才能开始滚动
5. 一级选择完成后，二级选择器将自动解锁，只显示筛选后的人格

### 技术改进

1. **代码组织**
   - 更好的函数分离和模块化设计
   - 新增了辅助函数提高代码复用性
   - 更清晰的注释和文档

2. **性能优化**
   - 优化了滚动动画的性能
   - 改进了数据过滤逻辑
   - 减少了不必要的DOM操作

3. **兼容性**
   - 保持对各种设备的响应式支持
   - 改进了图片加载失败的处理逻辑

## 版本 1.1 → 1.1.1

### 新增功能

1. **倒计时功能**
   - 新增了"边狱巴士第七赛季"倒计时显示
   - 使用指定API接口获取时间数据，确保准确性
   - 支持秒级精确显示，格式为"XX天XX小时XX分XX秒"
   - 目标时间设置为2025年12月31日11:00:00（UTC时间）

2. **视觉效果优化**
   - 为"第七赛季"文字添加了发光动画效果
   - 使用Lora字体增强视觉体验
   - 采用猩红偏黄(#ff4500)配色方案突出显示

3. **稳定性保障**
   - 实现API请求失败时的本地时间回退机制
   - 确保倒计时功能在各种网络环境下都能正常工作

### 技术实现

1. **API集成**
   - 使用接口盒子接口获取时间数据
   - 实现异步API请求和错误处理

2. **动画效果**
   - 引入CSS动画实现文字发光效果
   - 使用`@keyframes`定义平滑的动画过渡

3. **性能优化**
   - 优化计时器更新频率，平衡准确性和性能
   - 减少不必要的DOM操作

---

**数据来源**: Limbus Company 中文维基
**反馈交流**: 084 QQ交流群：313198040
**欢迎反馈、提建议、报告Bug**